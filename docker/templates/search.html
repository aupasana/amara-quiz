{% extends "bootstrap/base.html" %}

{% block styles %}
{{super()}}
    <style type="text/css">
      body {
        background: beige;
        color: black;
      }
      a {
        text-decoration: none;
      }
      div.container {
        max-width: 800px;
        border: 20px solid brown;
        padding: 10px;
        text-align: center;
      }
      .term {
        style: bold;
        font-size: x-large;
        padding-bottom: 10px;
      }
      table {
        border: 1px solid black;
        width: 100%;
        text-align: center;
      }
      th, td {
        border: 1px dotted grey;
        text-align: center;
      }
    </style>
{% endblock %}

{% block scripts %}
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script>
      $(document).ready(function(){
          window.page = 1;
          $("#button-previous").prop('disabled',true);

          $("#button-previous").click(function() {
            window.page = window.page-1;
            $('#content-inner').load('/search?term={{user_term}}&page=' + window.page + ' #content-inner');

            if (window.page === 1) {
              $("#button-previous").prop('disabled',true);
            }
          });

          $("#button-next").click(function() {
            window.page = window.page+1;
            $('#content-inner').load('/search?term={{user_term}}&page=' + window.page + ' #content-inner');
            $("#button-previous").prop('disabled',false);
          });

      });
    </script>
{% endblock %}

{% block content %}
    <div id="content-outer" class="container">

      <h3><a href="/">अमरकोषसम्पद्</a></h3>

      <button id="button-previous">previous</button>
      <button id="button-next">next</button>

      <div id="content-inner">

          <div class="term">Search: {{term}} ({{user_term}}). Page {{page}}</div>

          <table id="results">
            <thead>
              <th>&nbsp;</th>
              <th>पदम्</th>
              <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
              <th>वर्गः</th>
              <th>लिङ्गम्</th>
              <th>अर्थः</th>
              <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
              <th>eng</th>
              <th>अमरे</th>
              <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
              <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
              <th>श्लोकः</th>
            </thead>
            <tbody>
              {% for row in rows %}
                <tr>
                  <td>{{((page | int) - 1) * 10 + loop.index}}</td>
                  <td>{{row["pada"]}}</td>
                  <td><a href="/search?term={{row['pada']}}"><img src="/icons/search.svg"/></a></td>
                  <td>{{row["varga"]}}</td>
                  <td>{{row["linga"]}}</td>
                  <td>{{row["artha"]}}</td>
                  <td><a href="/search?term={{row['artha']}}"><img src="/icons/search.svg"/></a></td>
                  <td>{{row["artha_english"]}}</td>
                  <td>{{row["sloka_word"]}}</td>
                  <td><a href="/sloka?sloka_number={{row['sloka_number']}}"><img src="/icons/search.svg"/></a></td>
                  <td><a href="/varga?varga={{row['varga']}}#{{row['sloka_number']}}"><img src="/icons/varga.svg"/></a></td>
                  <!-- <td><a href="amara_mulam.html#{{row['sloka_number']}}" target="amara-answer">{{row["sloka_reference"]}}</a></td> -->
                  <td>{{row["sloka_text"] | replace("।","।<br/>") | replace("॥","॥<br/>") | safe }}</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>

      </div>

    </div>
{% endblock %}
